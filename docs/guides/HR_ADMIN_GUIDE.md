# HR管理员功能使用指南

## 🎯 功能概述

HR（admin角色）拥有完整的面试管理权限，可以创建面试场次、生成邀请链接、管理候选人信息等。

## 🔐 权限说明

### HR（admin角色）权限
- ✅ 创建面试场次
- ✅ 批量创建面试场次
- ✅ 查看所有面试场次
- ✅ 管理候选人信息
- ✅ 生成和发送邀请链接
- ✅ 重新发送邀请邮件
- ✅ 取消面试场次
- ✅ 查看统计数据
- ✅ 管理面试模板
- ✅ 管理题库

### 其他角色权限
- **面试官（interviewer）**: 可以创建面试场次，查看分配的面试
- **候选人（candidate）**: 只能查看自己的面试场次

## 🚀 主要功能

### 1. 面试场次管理

#### 创建单个面试场次
- **路径**: `/admin/interviews/create`
- **功能**: 创建新的面试场次并自动生成邀请链接
- **必需信息**:
  - 面试名称
  - 面试模板
  - 面试时间
  - 候选人信息（姓名、邮箱、手机号、职位）

#### 批量创建面试场次
- **路径**: `/admin/interviews/batch`
- **功能**: 一次性创建多个面试场次
- **特性**:
  - 支持默认设置
  - 可以下载CSV模板
  - 批量验证和错误处理
  - 实时显示创建结果

#### 面试场次列表
- **路径**: `/admin/interviews`
- **功能**: 查看和管理所有面试场次
- **特性**:
  - 搜索和筛选功能
  - 状态统计
  - 邀请链接管理
  - 重新发送邀请
  - 取消面试

### 2. 候选人管理

#### 候选人列表
- **路径**: `/admin/candidates`
- **功能**: 管理所有候选人信息
- **特性**:
  - 候选人信息统计
  - 面试次数统计
  - 搜索和筛选
  - 快速创建面试

#### 候选人信息包含
- 基本信息：姓名、邮箱、手机号、职位
- 面试统计：面试次数、首次面试时间、最近面试时间
- 面试频率：平均面试间隔

### 3. 邀请链接系统

#### 自动生成邀请链接
- 每个面试场次自动生成唯一的邀请令牌
- 邀请链接格式: `https://yourdomain.com/invite/{token}`
- 默认有效期: 7天

#### 邀请链接管理
- 一键复制邀请链接
- 预览邀请页面
- 重新发送邀请邮件
- 链接过期自动续期

### 4. 邮件通知系统

#### 自动邮件发送
- 创建面试时自动发送邀请邮件
- 邮件包含完整的面试信息
- 美观的HTML邮件模板
- 支持中文内容

#### 邮件内容包含
- 面试基本信息
- 候选人信息确认
- 面试说明和注意事项
- 邀请链接和有效期

### 5. 统计和报表

#### HR仪表板
- **路径**: `/admin`
- **功能**: 提供面试数据统计
- **统计指标**:
  - 总面试数
  - 已安排面试数
  - 进行中面试数
  - 已完成面试数
  - 已取消面试数
  - 完成率统计

#### 实时统计
- 面试状态分布
- 候选人活跃度
- 面试完成率
- 最近面试记录

## 📋 使用流程

### HR创建面试流程

1. **登录系统**
   - 使用admin账号登录
   - 进入HR管理面板

2. **选择创建方式**
   - 单个创建：点击"创建面试"
   - 批量创建：点击"批量创建"

3. **填写面试信息**
   - 面试基本信息
   - 候选人信息
   - 面试模板和面试官
   - 面试时间设置

4. **系统自动处理**
   - 生成唯一邀请令牌
   - 创建邀请链接
   - 发送邮件通知候选人

5. **管理面试场次**
   - 查看面试列表
   - 复制邀请链接
   - 重新发送邀请
   - 监控面试状态

### 候选人参与流程

1. **接收邮件**
   - 候选人收到面试邀请邮件
   - 邮件包含面试详情和邀请链接

2. **访问邀请页面**
   - 点击邮件中的邀请链接
   - 查看面试详细信息
   - 确认候选人信息

3. **加入面试**
   - 登录或注册系统
   - 点击"加入面试"
   - 开始面试

## 🔧 API接口

### HR专用API

#### 统计数据
```http
GET /api/interviews/hr/statistics
Authorization: Bearer {token}
```

#### 获取所有面试场次
```http
GET /api/interviews/hr/sessions
Authorization: Bearer {token}
```

#### 批量创建面试
```http
POST /api/interviews/hr/sessions/batch
Authorization: Bearer {token}
Content-Type: application/json

{
  "sessions": [
    {
      "name": "面试名称",
      "templateId": 1,
      "scheduledAt": "2024-01-01T10:00:00Z",
      "candidateInfo": {
        "name": "候选人姓名",
        "email": "candidate@example.com",
        "phone": "13800138000",
        "position": "职位"
      }
    }
  ]
}
```

#### 获取候选人列表
```http
GET /api/interviews/hr/candidates
Authorization: Bearer {token}
```

#### 重新发送邀请
```http
POST /api/interviews/sessions/{id}/resend-invite
Authorization: Bearer {token}
```

#### 取消面试
```http
PATCH /api/interviews/sessions/{id}/cancel
Authorization: Bearer {token}
```

## 🎨 界面特性

### 响应式设计
- 支持桌面和移动设备
- 现代化的UI设计
- 直观的操作界面

### 用户体验
- 实时状态更新
- 一键复制功能
- 搜索和筛选
- 状态统计图表
- 批量操作支持

### 安全性
- 角色权限控制
- 邀请令牌唯一性
- 链接过期机制
- 用户身份验证

## 📊 数据管理

### 候选人数据
- 独立存储候选人信息
- 不依赖用户系统
- 支持重复候选人
- 面试历史记录

### 面试数据
- 完整的面试记录
- 状态跟踪
- 时间管理
- 结果统计

### 邀请数据
- 唯一邀请令牌
- 过期时间管理
- 使用状态跟踪

## 🔮 高级功能

### 批量操作
- 批量创建面试
- 批量发送邀请
- 批量状态更新

### 模板管理
- 面试模板创建
- 模板复用
- 默认设置

### 统计分析
- 面试完成率
- 候选人活跃度
- 时间分布统计
- 趋势分析

## 🛠️ 配置说明

### 环境变量
```bash
# 前端URL（用于生成邀请链接）
FRONTEND_URL=http://localhost:3000

# JWT密钥
JWT_SECRET=your-super-secret-jwt-key

# 数据库配置
DATABASE_HOST=mysql
DATABASE_PORT=3306
DATABASE_USER=interview_user
DATABASE_PASSWORD=interview_pass
DATABASE_NAME=interview_system
```

### 邮件服务配置
目前使用模拟邮件服务，生产环境需要集成真实的邮件服务：
- SendGrid
- AWS SES
- Nodemailer
- 其他SMTP服务

## 📞 技术支持

### 常见问题

1. **邀请链接无法访问**
   - 检查链接是否过期
   - 确认候选人已登录系统
   - 验证邀请令牌是否正确

2. **邮件发送失败**
   - 检查邮件服务配置
   - 查看服务器日志
   - 验证候选人邮箱格式

3. **权限不足**
   - 确认用户角色为admin
   - 检查JWT token是否有效
   - 重新登录获取新token

### 联系支持
如有问题或建议，请联系开发团队或查看项目文档。

---

*最后更新: 2024年1月*
